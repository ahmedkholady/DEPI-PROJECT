# Nixpacks configuration for E-Commerce Platform
# This tells Railpack how to build and deploy the application

# Build configuration
[phases.setup]
nixPkgs = ["php82", "php82Packages.composer", "nodejs_20"]

[phases.install]
cmds = [
    "echo 'Installing dependencies...'",
    "# Backend dependencies",
    "cd 'Additional/back-end' && composer install --no-interaction --optimize-autoloader --no-dev",
    "# Frontend dependencies", 
    "cd '../../Graduation E-Commerce' && npm install"
]

[phases.build]
cmds = [
    "echo 'Building frontend...'",
    "cd 'Graduation E-Commerce' && npm run build"
]

[start]
cmd = "./start.sh"
